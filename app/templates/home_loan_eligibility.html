{% extends "base.html" %}
{% block content %}

<style>
/* ============================= */
/* üíé EMI Calculator Pro Theme */
/* ============================= */

:root{
--primary:#2563eb;
--primary-light:#3b82f6;
--dark:#0f172a;
--text:#1e293b;
--muted:#64748b;
--border:#e2e8f0;
--bg:#f8fafc;
--card:#ffffff;
--success:#16a34a;
--danger:#dc2626;
}

/* Background */
body{
background:linear-gradient(135deg,#f1f5f9,#eef2ff);
font-family:'Inter',sans-serif;
color:var(--text);
}

/* Container */
.eligibility-container{
max-width:1100px;
margin:90px auto;
padding:20px;
}

/* Header */
.eligibility-container h2{
font-size:40px;
font-weight:800;
color:var(--dark);
margin-bottom:6px;
}

.eligibility-container p{
color:var(--muted);
margin-bottom:45px;
font-size:15px;
}

/* Card */
.eligibility-card{
background:var(--card);
padding:45px;
border-radius:24px;
box-shadow:0 25px 60px rgba(15,23,42,0.08);
border:1px solid var(--border);
transition:0.3s ease;
}

.eligibility-card:hover{
box-shadow:0 30px 70px rgba(15,23,42,0.12);
}

/* Grid */
.eligibility-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:35px;
}

/* Labels */
label{
font-size:13px;
font-weight:600;
color:var(--muted);
}

/* Inputs */
input{
width:100%;
padding:14px 16px;
border-radius:12px;
border:1px solid var(--border);
margin-top:6px;
margin-bottom:22px;
font-size:14px;
background:#f8fafc;
transition:0.25s;
}

input:focus{
border-color:var(--primary);
background:#fff;
box-shadow:0 0 0 4px rgba(37,99,235,0.1);
outline:none;
}

/* Button */
button{
background:var(--primary);
color:white;
border:none;
padding:16px;
border-radius:14px;
font-weight:700;
font-size:15px;
cursor:pointer;
transition:0.3s;
box-shadow:0 10px 25px rgba(37,99,235,0.25);
width:100%;
}

button:hover{
background:var(--primary-light);
transform:translateY(-2px);
box-shadow:0 15px 35px rgba(37,99,235,0.35);
}

/* Result Box */
.result-box{
margin-top:40px;
padding:35px;
border-radius:20px;
background:#ffffff;
box-shadow:0 15px 40px rgba(0,0,0,0.06);
border:1px solid var(--border);
animation:fadeIn .4s ease;
}

.result-box h3{
margin-bottom:15px;
font-weight:700;
}

.result-box p{
font-size:15px;
margin-bottom:12px;
line-height:1.6;
}

/* Animation */
@keyframes fadeIn{
from{opacity:0;transform:translateY(15px);}
to{opacity:1;transform:translateY(0);}
}

/* Responsive */
@media(max-width:768px){
.eligibility-grid{
grid-template-columns:1fr;
}
.eligibility-card{
padding:25px;
}
.eligibility-container h2{
font-size:28px;
}
}

/* ================= HERO DESIGN ================= */

.eligibility-header{
text-align:center;
margin-bottom:60px;
position:relative;
}

/* Small top badge */
.badge{
display:inline-block;
background:linear-gradient(135deg,#e0f2fe,#eef2ff);
color:#2563eb;
font-size:13px;
font-weight:600;
padding:8px 16px;
border-radius:30px;
margin-bottom:20px;
box-shadow:0 5px 15px rgba(0,0,0,0.05);
}

/* Main Title */
.main-title{
font-size:46px;
font-weight:800;
color:#0f172a;
letter-spacing:-1px;
line-height:1.2;
}

/* Highlight word */
.main-title span{
color:#2563eb;
font-style:italic;
position:relative;
}

/* Underline animation */
.main-title span::after{
content:"";
position:absolute;
left:0;
bottom:-5px;
width:100%;
height:6px;
background:linear-gradient(90deg,#3b82f6,#60a5fa);
border-radius:10px;
opacity:0.3;
}

/* Subtitle */
.subtitle{
margin-top:15px;
font-size:16px;
color:#64748b;
max-width:650px;
margin-left:auto;
margin-right:auto;
line-height:1.6;
}

/* Responsive */
@media(max-width:768px){
.main-title{
font-size:30px;
}
.subtitle{
font-size:14px;
}
}
</style>
<br><br>
<div class="eligibility-container">

<div class="eligibility-header">
    <div class="badge">üè† Smart Loan Planning</div>

    <h1 class="main-title">
        Home Loan <span>Eligibility</span> Calculator
    </h1>

    <p class="subtitle">
        Instantly estimate the maximum home loan amount you qualify for
        based on your income and financial commitments.
    </p>
</div>

<div class="eligibility-card">

<div class="eligibility-grid">

<div>
<label>Monthly Income (‚Çπ)</label>
<input type="number" id="income" placeholder="Enter monthly income">

<label>Existing EMIs (‚Çπ)</label>
<input type="number" id="existingEmi" placeholder="Enter existing EMIs">
</div>

<div>
<label>Interest Rate (%)</label>
<input type="number" id="interestRate" placeholder="Annual interest rate">

<label>Tenure (Years)</label>
<input type="number" id="tenureYears" placeholder="Loan tenure in years">
</div>

</div>

<button onclick="calculateEligibility()">Check Eligibility</button>

<div class="result-box" id="resultBox" style="display:none;">
<h3>Eligibility Result</h3>
<p id="eligibleLoan"></p>
<p id="eligibleEmi"></p>
</div>

</div>
</div>

<!-- ================= RESPONSIVE AFFILIATE SECTION ================= -->

<style>

/* SECTION WRAPPER */
.affiliate-section{
margin:80px auto;
padding:60px 20px;
max-width:1300px;
background:linear-gradient(135deg,#f8fafc,#eef2ff);
border-radius:30px;
}

/* HEADER */
.affiliate-header{
text-align:center;
margin-bottom:50px;
}

.affiliate-header h2{
font-size:34px;
font-weight:800;
color:#0f172a;
}

.affiliate-header p{
color:#64748b;
margin-top:8px;
font-size:15px;
}

/* GRID DEFAULT (DESKTOP) */
.affiliate-grid{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:30px;
}

/* CARD */
.affiliate-card{
background:#ffffff;
border-radius:24px;
padding:35px;
box-shadow:0 20px 50px rgba(0,0,0,0.06);
transition:0.3s ease;
position:relative;
border:1px solid #e2e8f0;
display:flex;
flex-direction:column;
justify-content:space-between;
}

.affiliate-card:hover{
transform:translateY(-8px);
box-shadow:0 30px 60px rgba(0,0,0,0.1);
}

/* BADGE */
.bank-badge{
position:absolute;
top:20px;
right:20px;
background:#2563eb;
color:white;
font-size:12px;
padding:6px 14px;
border-radius:20px;
font-weight:600;
}

.badge-green{ background:#16a34a; }
.badge-orange{ background:#f97316; }

/* CARD CONTENT */
.affiliate-card h4{
font-size:20px;
font-weight:700;
margin-bottom:10px;
margin-top:10px;
}

.affiliate-card p{
color:#64748b;
font-size:14px;
margin-bottom:15px;
}

.affiliate-card ul{
padding-left:18px;
margin-bottom:25px;
}

.affiliate-card li{
margin-bottom:8px;
font-size:14px;
color:#334155;
}

/* BUTTON */
.apply-btn{
background:linear-gradient(135deg,#2563eb,#3b82f6);
color:white;
padding:14px;
border-radius:14px;
text-align:center;
text-decoration:none;
font-weight:700;
transition:0.3s;
display:block;
box-shadow:0 10px 25px rgba(37,99,235,0.3);
}

.apply-btn:hover{
transform:translateY(-3px);
}

/* ========================= */
/* üì≤ TABLET VIEW */
/* ========================= */

@media(max-width:1024px){
.affiliate-grid{
grid-template-columns:repeat(2,1fr);
}
}

/* ========================= */
/* üì± MOBILE VIEW */
/* ========================= */

@media(max-width:768px){

.affiliate-section{
padding:40px 15px;
border-radius:20px;
}

.affiliate-header h2{
font-size:24px;
}

.affiliate-grid{
grid-template-columns:1fr;
gap:20px;
}

.affiliate-card{
padding:25px;
border-radius:18px;
}

.apply-btn{
font-size:14px;
padding:12px;
}

}

</style>
<div class="affiliate-section">

<div class="affiliate-header">
<h2>üè¶ Recommended Home Loan Offers</h2>
<p>Compare trusted banks & apply instantly</p>
</div>

<div class="affiliate-grid">

<!-- HDFC -->
<div class="affiliate-card">
<div class="bank-badge">Low Interest</div>
<h4>HDFC Bank Home Loan</h4>
<p>Interest starting from 8.40% onwards</p>
<ul>
<li>‚úî Quick Approval</li>
<li>‚úî Minimal Documentation</li>
<li>‚úî Flexible Tenure</li>
</ul>
<a href="https://www.hdfcbank.com/personal"
   target="_blank"
   rel="nofollow noopener"
   class="apply-btn">
Apply Now ‚Üí
</a>
</div>

<!-- ICICI -->
<div class="affiliate-card">
<div class="bank-badge badge-green">Fast Processing</div>
<h4>ICICI Bank Home Loan</h4>
<p>Special offers for salaried professionals</p>
<ul>
<li>‚úî Zero Prepayment Charges</li>
<li>‚úî Online Application</li>
<li>‚úî Top-up Loan Available</li>
</ul>
<a href="https://www.icicibank.com/personal-banking/loans/home-loan"
   target="_blank"
   rel="nofollow noopener"
   class="apply-btn">
Check Offer ‚Üí
</a>
</div>

<!-- SBI -->
<div class="affiliate-card">
<div class="bank-badge badge-orange">Balance Transfer</div>
<h4>SBI Home Loan</h4>
<p>Transfer your existing loan & save interest</p>
<ul>
<li>‚úî Government Bank</li>
<li>‚úî Low Processing Fee</li>
<li>‚úî High Approval Rate</li>
</ul>
<a href="https://homeloans.sbi/"
   target="_blank"
   rel="nofollow noopener"
   class="apply-btn">
Transfer Now ‚Üí
</a>
</div>

</div>

<!-- Safety Disclaimer -->
<p style="font-size:12px;color:#64748b;text-align:center;margin-top:20px;">
We are not directly affiliated with banks. Links redirect to official bank websites.
</p>

</div>

</div>

<script>
function calculateEligibility(){

const income = parseFloat(document.getElementById("income").value);
const existingEmi = parseFloat(document.getElementById("existingEmi").value) || 0;
const rate = parseFloat(document.getElementById("interestRate").value);
const tenureYears = parseFloat(document.getElementById("tenureYears").value);
const resultBox = document.getElementById("resultBox");
const eligibleLoanText = document.getElementById("eligibleLoan");
const eligibleEmiText = document.getElementById("eligibleEmi");

eligibleLoanText.innerText="";
eligibleEmiText.innerText="";
resultBox.style.display="none";

if(!income || !rate || !tenureYears){
alert("Fill required fields");
return;
}

const FOIR = 0.5;
const allowedEmi = income * FOIR;
const eligibleEmi = allowedEmi - existingEmi;

resultBox.style.display="block";

/* ================= SCORE CALCULATION ================= */

const emiLoadPercent = (existingEmi / income) * 100;
let score = 100 - emiLoadPercent;
if(score < 0) score = 0;

let riskLabel = "";
if(score >= 75) riskLabel = "üü¢ Excellent";
else if(score >= 50) riskLabel = "üü° Moderate";
else riskLabel = "üî¥ High Risk";

/* ================= NOT ELIGIBLE ================= */

if(eligibleEmi <= 0){

eligibleLoanText.innerText =
"‚ùå No additional loan capacity available.";

eligibleEmiText.innerText =
"You must reduce EMI below ‚Çπ " + allowedEmi.toFixed(0) +
" to qualify.";

eligibleEmiText.innerHTML += 
"<br><br>Eligibility Score: " + score.toFixed(0) + "/100 (" + riskLabel + ")";

return;
}

/* ================= ELIGIBLE ================= */

const R = rate/12/100;
const N = tenureYears * 12;

const loanAmount =
eligibleEmi *
((Math.pow(1+R,N)-1) / (R*Math.pow(1+R,N)));

eligibleLoanText.innerText =
"Maximum Eligible Loan Amount: ‚Çπ " + loanAmount.toFixed(0);

eligibleEmiText.innerHTML =
"Maximum EMI You Can Pay: ‚Çπ " + eligibleEmi.toFixed(0) +
"<br><br>Eligibility Score: " + score.toFixed(0) +
"/100 (" + riskLabel + ")";

/* ================= SMART SUGGESTION ================= */

if(score < 50){
eligibleEmiText.innerHTML +=
"<br><br>üí° Suggestion: Reduce EMI or increase income to improve eligibility.";
}

}</script>

{% endblock %}